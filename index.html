<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Pathology Slide Viewer</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- OpenSeadragon library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.1.0/openseadragon.min.js"></script>
    
    <!-- Google Fonts: Inter for a clean look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* A light gray background */
        }
        #openseadragon-viewer {
            width: 100%;
            height: 100%;
            background-color: #000;
        }
        .viewer-container {
            height: 75vh; /* 75% of the viewport height */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-md">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <h1 class="text-3xl font-bold leading-tight text-gray-900">
                Digital Pathology Slide Viewer
            </h1>
            <p class="text-gray-600 mt-1">A resource for students</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="py-10">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            
            <!-- Slide Information -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                <h2 id="slide-title" class="text-2xl font-bold mb-2">Sample Slide: Adenocarcinoma</h2>
                <p id="slide-description" class="text-gray-700">
                    This is a sample slide showing a case of adenocarcinoma of the colon. Use your mouse wheel or pinch-to-zoom on mobile to explore the slide at different magnifications. You can click and drag to pan across the image.
                </p>
            </div>

            <!-- The Viewer Container -->
            <div id="viewer-container" class="viewer-container rounded-lg overflow-hidden border-4 border-gray-200">
                <div id="openseadragon-viewer"></div>
            </div>

            <!-- Slide Selection -->
            <div class="mt-8">
                <h3 class="text-xl font-semibold mb-4">Available Slides</h3>
                <div id="slide-selector" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <!-- Slide buttons will be added here by JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white mt-12 py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500">
            <p>&copy; 2024 Your Institution Name. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // --- SLIDE DATA ---
        // This is where you will add your own slides.
        // Follow the format: title, description, and the URL to your DZI file.
        const slides = [
            {
                title: "Sample: Adenocarcinoma",
                description: "This is a sample slide showing a case of adenocarcinoma of the colon. This example is hosted by OpenSeadragon.",
                url: "https://openseadragon.github.io/example-images/duomo/duomo.dzi"
            },
            // --- YOUR NEWLY CONVERTED SLIDE ---
            // IMPORTANT: Replace the placeholder URL with your actual GitHub Pages URL
            {
                title: "C3L-01663-21",
                description: "A whole slide image of case C3L-01663-21.",
                url: "https://YOUR-GITHUB-USERNAME.github.io/YOUR-REPO-NAME/converted_slides/C3L-01663-21.dzi"
            }
        ];

        // --- VIEWER INITIALIZATION ---
        let viewer; // Make viewer accessible globally

        function initializeViewer(dziUrl) {
            if (viewer) {
                viewer.destroy();
            }
            viewer = OpenSeadragon({
                id: "openseadragon-viewer",
                prefixUrl: "https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.1.0/images/",
                tileSources: dziUrl,
                animationTime: 0.5,
                blendTime: 0.1,
                constrainDuringPan: true,
                maxZoomPixelRatio: 2,
                minZoomLevel: 1,
                visibilityRatio: 1,
                zoomPerScroll: 2,
                showNavigator: true,
                navigatorPosition: "BOTTOM_RIGHT",
            });
        }
        
        // --- DYNAMIC CONTENT ---
        const slideTitleElement = document.getElementById('slide-title');
        const slideDescriptionElement = document.getElementById('slide-description');
        const slideSelectorElement = document.getElementById('slide-selector');

        function loadSlide(slide) {
            slideTitleElement.textContent = slide.title;
            slideDescriptionElement.textContent = slide.description;
            initializeViewer(slide.url);
        }

        // Create buttons for each slide
        slides.forEach(slide => {
            const button = document.createElement('button');
            button.className = "bg-white hover:bg-gray-100 text-gray-800 font-semibold py-3 px-4 border border-gray-300 rounded-lg shadow transition duration-150 ease-in-out";
            button.textContent = slide.title;
            button.onclick = () => loadSlide(slide);
            slideSelectorElement.appendChild(button);
        });

        // --- INITIAL LOAD ---
        // Load the first slide by default when the page opens
        if (slides.length > 0) {
            loadSlide(slides[0]);
        } else {
            slideTitleElement.textContent = "No slides available";
            slideDescriptionElement.textContent = "Please add slide data to the script section of the HTML file.";
        }

    </script>

</body>
</html>
